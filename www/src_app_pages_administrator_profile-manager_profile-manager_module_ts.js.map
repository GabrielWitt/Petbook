{"version":3,"file":"src_app_pages_administrator_profile-manager_profile-manager_module_ts.js","mappings":"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","sources":["./src/app/pages/administrator/profile-manager/profile-manager-routing.module.ts","./src/app/pages/administrator/profile-manager/profile-manager.module.ts","./src/app/pages/administrator/profile-manager/profile-manager.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfileManagerPage } from './profile-manager.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfileManagerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfileManagerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfileManagerPageRoutingModule } from './profile-manager-routing.module';\n\nimport { ProfileManagerPage } from './profile-manager.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    ReactiveFormsModule,\n    ProfileManagerPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [ProfileManagerPage]\n})\nexport class ProfileManagerPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { User, userFormData } from 'src/app/core/models/user';\nimport { AlertsService } from 'src/app/shared/utilities/alerts';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { VerificationFuncService } from 'src/app/shared/utilities/verificationFunc';\nimport { attachmentOptions, UserPhoto } from 'src/app/core/models/images';\nimport { AttachmentsService } from 'src/app/shared/utilities/attachments.service';\nimport { ImageUploaderService } from 'src/app/core/services/image-uploader.service';\nimport { NewPetComponent } from 'src/app/shared/components/pets/new-pet/new-pet.component';\nimport { NewNoticeComponent } from 'src/app/shared/components/notices/new-notice/new-notice.component';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { Pet } from 'src/app/core/models/species';\nimport { PetService } from 'src/app/core/services/modules/pet-service.service';\nimport { FireAuthService } from 'src/app/core/services/modules/fire-auth.service';\n\n@Component({\n  selector: 'app-profile-manager',\n  templateUrl: './profile-manager.page.html',\n  styleUrls: ['./profile-manager.page.scss'],\n})\nexport class ProfileManagerPage implements OnInit {\n  loading = false;\n  edit = false;\n  defaultUser = '../../../../assets/profile/ProfileBlank.png';\n  newImage;\n  progress=0;\n\n  user: User;\n  userData: userFormData;\n  petList: Pet[] = [];\n\n  registerForm: FormGroup;\n  validationMessages  = {\n    name:[ {type: 'required', message: ' Escribe tu nombre'},],\n    lastName:[ {type: 'required', message: ' Escribe tu apellido'},],\n    birthday:[ {type: 'required', message: ' Ingresa tu fecha de nacimiento'},]\n  };\n\n  // DARK MODE\n  prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n  darkModeToggle = false;\n\n  constructor(\n    private pets: PetService,\n    private router: Router,\n    private alerts: AlertsService,\n    private modal: ModalController,\n    private upload: ImageUploaderService,\n    private images: AttachmentsService,\n    private routerOutlet: IonRouterOutlet,\n    private formBuilder: FormBuilder,\n    private auth: FireAuthService,\n    private verification: VerificationFuncService,\n  ) { \n    console.log(this.prefersDark)\n    console.log(this.prefersDark.matches)\n    this.darkModeToggle = this.prefersDark.matches;\n    this.prefersDark.addListener((e) => console.log(e.matches));\n   }\n\n  ngOnInit() {\n    this.registerForm = this.formBuilder.group({\n      name:[null, { validators: [Validators.required, Validators.minLength(2)] }],\n      lastName:[null, { validators: [Validators.required, Validators.minLength(3)] }],\n      birthday:[null, { validators: [Validators.required] }]\n    });\n    this.checkUser().then(ok => {\n      this.images.loadSaved().then((attachment: any) => {\n        if (attachment.length && attachment[0].deploy){\n          this.changeProfileImage(attachment[0]);\n        }\n      });\n    });\n  }\n\n  EnterSubmit(evt, form){\n    this.verification.EnterSubmit(evt,form,this.loading).then(answer => {\n      if(answer){ console.log('Enter') }\n    })\n  }\n\n  checkUser() {\n    return new Promise((resolve, reject) => {\n      try {\n        this.loading = true;\n        this.auth.checkUser().then((user: any) =>{\n          this.user = user.user;\n          this.userData = user.data;\n          this.loadMyPets().then(ok => {\n            this.loading = false;\n            resolve('done')\n          });\n        });\n      } catch (error) {\n        console.log(error);\n        this.loading = false;\n        reject(error);\n      }\n    })\n  }\n\n  async loadMyPets(){\n    try {\n      this.petList = await this.pets.myPetList(this.user.uid);\n      return 'done';\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  editForm(){\n    if(!this.edit){\n      this.edit = !this.edit;\n      this.registerForm = this.formBuilder.group({\n        name:[this.userData.name, { validators: [Validators.required, Validators.minLength(2)] }],\n        lastName:[this.userData.lastName, { validators: [Validators.required, Validators.minLength(3)] }],\n        birthday:[this.userData.birthDate, { validators: [Validators.required] }]\n      });\n    } else {\n      const newValues = this.registerForm.value;\n      const nameCheck = this.userData.name !== newValues.name;\n      const lastNameCheck = this.userData.lastName !== newValues.lastName;\n      const birthDateCheck = this.userData.birthDate !== newValues.birthday;\n      if(nameCheck || lastNameCheck || birthDateCheck) {\n        this.loading = true;\n        const data = {\n          ...this.userData,\n          name: newValues.name,\n          lastName: newValues.lastName,\n          birthDate: newValues.birthday\n        }\n        this.auth.uploadUserForm(this.user.uid, data)\n        .then(ok => { \n          this.edit = !this.edit;\n          this.alerts.showAlert('PERFIL','Tus datos han sido actualizados','OK');\n          this.checkUser();\n          this.loading = false;\n        })\n      } else{\n        this.edit = !this.edit;\n      }\n    }\n  }\n\n  // IMAGE SYSTEM\n  addPhoto() {\n    const options: attachmentOptions = {\n      currentRoute: 'manager/profile',\n      height:null, width:null, pdf: false\n    }\n    this.images.presentImageOptions(options).then(imageObj => {\n      if (imageObj[0] !== undefined){\n        this.changeProfileImage(imageObj[0]);\n      }\n    });\n  }\n\n  changeProfileImage(image: UserPhoto){\n    this.loading = true;\n    this.newImage = image;\n    const imageName = Date().toString()+'_'+this.user.uid;\n    this.upload.uploadFile('profile',imageName, image.file,\n    (progress)=>{ this.progress = progress })\n    .then((data:any) => {\n      this.auth.updateUser('administrador', data.url).then(done => {\n        this.userData.photo = data.url;\n        this.auth.uploadUserForm(this.user.uid, this.userData)\n        this.alerts.showAlert('PERFIL','Tus imagen de perfil ha sido actualizada','OK');\n        this.upload.deletePicture();\n        this.newImage = null;\n        this.checkUser();\n        this.loading = false;\n      })\n    })\n  }\n\n  upgradeProfile(){\n    this.loading = true;\n    this.auth.upgradeUser().then((done: any) => {\n      this.alerts.showAlert('PERFIL',done,'OK');\n      this.checkUser();\n      this.loading = false;\n    })\n  }\n\n  async doRefresh(refresh?){\n    await this.checkUser().then(done => {\n      console.log('done');\n      if (refresh){ refresh.target.complete(); }\n    }).catch(error => {\n      console.log(error);\n      if (refresh){ refresh.target.complete(); }\n    })\n  }\n\n  async newPet(){\n    const modal = await this.modal.create({\n      component: NewPetComponent,\n      componentProps: {pet: null, userData: this.userData},\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    if(modalResult.data){ this.loadMyPets(); }\n  }\n\n  async editPet(pet){\n    const modal = await this.modal.create({\n      component: NewPetComponent,\n      componentProps: {pet, userData: this.userData},\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    if(modalResult.data){\n      console.log(modalResult.data.action)\n      if(modalResult.data.action === 'update'){\n        this.loadMyPets(); \n      } else if(modalResult.data.action === 'report') {\n        this.newReport(modalResult.data.pet);\n      }\n    }\n  }\n\n  async newReport(pet){\n    const modal = await this.modal.create({\n      component: NewNoticeComponent,\n      componentProps: {notice: null, user: this.userData, pet},\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    if(modalResult.data){ this.router.navigateByUrl('administrator/news'); }\n  }\n}\n"],"names":["Component","Router","AlertsService","FormBuilder","Validators","VerificationFuncService","AttachmentsService","ImageUploaderService","NewPetComponent","NewNoticeComponent","IonRouterOutlet","ModalController","PetService","FireAuthService","ProfileManagerPage","constructor","pets","router","alerts","modal","upload","images","routerOutlet","formBuilder","auth","verification","name","type","message","lastName","birthday","window","matchMedia","console","log","prefersDark","matches","darkModeToggle","addListener","e","ngOnInit","registerForm","group","validators","required","minLength","checkUser","then","ok","loadSaved","attachment","length","deploy","changeProfileImage","EnterSubmit","evt","form","loading","answer","Promise","resolve","reject","user","userData","data","loadMyPets","error","petList","myPetList","uid","editForm","edit","birthDate","newValues","value","nameCheck","lastNameCheck","birthDateCheck","uploadUserForm","showAlert","addPhoto","options","currentRoute","height","width","pdf","presentImageOptions","imageObj","undefined","image","newImage","imageName","Date","toString","uploadFile","file","progress","updateUser","url","done","photo","deletePicture","upgradeProfile","upgradeUser","doRefresh","refresh","target","complete","catch","newPet","create","component","componentProps","pet","mode","presentingElement","nativeEl","present","modalResult","onWillDismiss","editPet","action","newReport","notice","navigateByUrl","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
{"version":3,"file":"src_app_pages_administrator_user-manager_user-manager_module_ts.js","mappings":"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","sources":["./src/app/pages/administrator/user-manager/profile-detail/profile-detail.component.ts","./src/app/pages/administrator/user-manager/user-manager-routing.module.ts","./src/app/pages/administrator/user-manager/user-manager.module.ts","./src/app/pages/administrator/user-manager/user-manager.page.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { userFormData } from 'src/app/core/models/user';\nimport { PetService } from 'src/app/core/services/modules/pet-service.service';\nimport { UsersService } from 'src/app/core/services/modules/users.service';\nimport { AlertsService } from 'src/app/shared/utilities/alerts';\n\n@Component({\n  selector: 'app-profile-detail',\n  templateUrl: './profile-detail.component.html',\n  styleUrls: ['./profile-detail.component.scss'],\n})\nexport class ProfileDetailComponent implements OnInit {\n  loading = false;\n  upgrading = false;\n  @Input() user: userFormData;\n  petList = []\n  defaultUser = '../../../../assets/profile/ProfileBlank.png';\n\n  constructor(\n    public modal: ModalController,\n    public alert: AlertsService,\n    private users: UsersService,\n    private pets: PetService\n  ) { }\n\n  ngOnInit() {\n    this.loadMyPets()\n  }\n\n  async loadMyPets(){\n    try {\n      this.petList = await this.pets.myPetList(this.user.uid);\n      return 'done';\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  upgradeUser(){\n    this.alert.AlertConfirm('CAMBIO A ADMINISTRADOR', '¿Está seguro que desea cambiar a este usuario a Administrador?')\n    .then(answer => {\n      if(answer){ \n        console.log('Administrador Nuevo')\n        this.upgrading = true;\n        this.users.upgradeUser(this.user.uid).then(done => {\n          this.alert.showAlert(\n            'USUARIO MEJORADO',\n            'Solicite que el usuario ingrese a su perfil para continuar con el proceso',\n            'OK');\n          this.user.manager = true;\n          this.upgrading = false;\n        }).catch(e => {\n          console.log(e);\n          this.upgrading = false;\n        })\n      }\n    })\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UserManagerPage } from './user-manager.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserManagerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UserManagerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserManagerPageRoutingModule } from './user-manager-routing.module';\n\nimport { UserManagerPage } from './user-manager.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { ProfileDetailComponent } from './profile-detail/profile-detail.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    UserManagerPageRoutingModule\n  ],\n  declarations: [\n    UserManagerPage,\n    ProfileDetailComponent\n  ]\n})\nexport class UserManagerPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { IonRouterOutlet, ModalController } from '@ionic/angular';\nimport { resolve } from 'dns';\nimport { ProfileDetailComponent } from 'src/app/pages/administrator/user-manager/profile-detail/profile-detail.component';\nimport { userFormData } from 'src/app/core/models/user';\nimport { UsersService } from 'src/app/core/services/modules/users.service';\nimport { AlertsService } from 'src/app/shared/utilities/alerts';\n\n@Component({\n  selector: 'app-user-manager',\n  templateUrl: './user-manager.page.html',\n  styleUrls: ['./user-manager.page.scss'],\n})\nexport class UserManagerPage implements OnInit {\n  loading = true;\n  userList: userFormData[] = [];\n\n  constructor(\n    private users: UsersService,\n    private modal: ModalController,\n    private routerOutlet: IonRouterOutlet,\n  ) { }\n\n  ngOnInit() {\n    this.loadUsers()\n    .then(() => {this.loading = false;})\n    .catch(() => {this.loading = false;})\n  }\n\n  loadUsers(){\n    return new Promise((resolve,reject) => {\n      this.users.readAllUsers()\n      .then(list => {\n        console.log(list);\n        this.userList = list;\n        resolve('ok')\n      }).catch(error => {\n        console.log(error);\n        reject('error');\n      })\n    })\n  }\n\n  async userDetail(user){\n    const modal = await this.modal.create({\n      component: ProfileDetailComponent,\n      componentProps: {user},\n      mode: 'ios',\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n    const modalResult = await modal.onWillDismiss();\n    if(modalResult.data){ this.loadUsers(); }\n  }\n\n  doRefresh(refresh?){\n    this.loadUsers().then(done => {\n      console.log('done');\n      if (refresh){ refresh.target.complete(); }\n    }).catch(error => {\n      console.log(error);\n      if (refresh){ refresh.target.complete(); }\n    })\n  }\n\n}\n"],"names":["Component","Input","ModalController","PetService","UsersService","AlertsService","ProfileDetailComponent","constructor","modal","alert","users","pets","ngOnInit","loadMyPets","petList","myPetList","user","uid","error","console","log","upgradeUser","AlertConfirm","then","answer","upgrading","done","showAlert","manager","catch","e","selector","template","IonRouterOutlet","UserManagerPage","routerOutlet","loadUsers","loading","Promise","resolve","reject","readAllUsers","list","userList","userDetail","create","component","componentProps","mode","presentingElement","nativeEl","present","modalResult","onWillDismiss","data","doRefresh","refresh","target","complete"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}